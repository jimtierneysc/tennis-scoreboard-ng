<div class="container-fluid">

  <div class="row col-xs-12 col-md-8">
    <div ng-if="vm.loading || vm.loadingFailed">
      <fe-loading-messages
        error="vm.loadingError"
        loading="vm.loading"
        failed="vm.loadingFailed"
      ></fe-loading-messages>
    </div>

    <div ng-if="!vm.loading && !vm.loadingFailed">
      <div ng-if="vm.loggedIn" class="standard-animation">
        <button ng-disabled="vm.showingNewEntity" class="btn btn-primary" ng-click="vm.showNewEntity()">
          <span class="glyphicon glyphicon-plus"></span> Team
        </button>
      </div>

      <div ng-if="vm.entitys.length == 0 && !vm.showingNewEntity">
        <fe-empty-list-message
          logged-in="vm.loggedIn"
          kind="players"
        ></fe-empty-list-message>
      </div>

      <div>
        <ol class="list-group">
          <li class="list-group-item standard-animation" ng-if="vm.showingNewEntityForm()">

            <!--New team-->
            <div class="row">
              <div class="col-xs-10 ">
                <fe-teams-form
                  form="vm.newEntityForm"
                  errors="vm.entityCreateErrors"
                  cancel="vm.cancelNewEntity()"
                  submit="vm.submitNewEntity()"
                  entity="vm.newEntity"
                  ok="Add"
                  players-list="vm.playerOptionsList"
                >
                </fe-teams-form>
              </div>
            </div>
          </li>

          <!--Team details-->
          <li class="list-group-item clearfix standard-animation" ng-repeat="entity in vm.entitys">

            <div class="row">
              <div class="col-xs-10">
                <div ng-if="!vm.showingEditEntityForm(entity) && !vm.hidingEntity(entity)"
                     ng-class="{'standard-animation': vm.animatingEntity(entity)}">
                  <div class="h4">
                    <span ng-if="entity.name">{{ entity.name}}</span>
                    <span ng-if="!entity.name">(unnamed)</span>
                  </div>
                  <div>
                    {{ entity.first_player.name}} and {{ entity.second_player.name }}
                  </div>
                </div>

                <div ng-if="vm.showingEditEntityForm(entity)" class="standard-animation">
                  <div>
                    <fe-teams-form
                      form="vm.editEntityForm"
                      errors="vm.entityUpdateErrors"
                      cancel="vm.cancelEditEntity()"
                      submit="vm.submitEditEntity()"
                      entity="vm.editEntity"
                      ok="Save"
                      players-list="vm.playerOptionsList"
                    >
                    </fe-teams-form>
                  </div>
                </div>
              </div>

              <div class="col-xs-2">
                <div class="pull-right standard-animation" ng-if="vm.loggedIn">
                  <fe-delete-entity-button
                    entity="entity"
                    delete-entity="vm.trashEntity(entity)"
                  ></fe-delete-entity-button>
                  <fe-edit-entity-button
                    entity="entity"
                    disable="vm.showingEditEntityForm(entity)"
                    edit-entity="vm.showEditEntity(entity)"
                  ></fe-edit-entity-button>
                </div>
              </div>
            </div>

          </li>

        </ol>

      </div>
    </div>
  </div>
</div>
